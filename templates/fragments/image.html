<a href="{{ share('directlink', filename) }}" id="img-a-{{ filename }}">
    <img id="img-{{filename}}" src="/{{ original }}" alt="MediaCrush" id="image" />
</a>
<script type="text/javascript">
function mediaSizeReporter() {
    var img = document.getElementById('img-{{filename}}');
    return { width: img.width, height: img.height };
}
function resizeMedia(x, y) {
    var img = document.getElementById('img-{{filename}}');
    img.width = x;
    img.height = y;
}
window.addEventListener('load', function() {
    if (window.album) {
    document.querySelector('#img-a-{{ filename }}').href = '/{{ filename }}';
        return;
    }
    var image = document.getElementById('img-{{filename}}');
    var dupe = document.createElement('img'); // Duplicate image so that CSS sizing and such doesn't affect the resolution
    dupe.onload = function() {
        document.title = "MediaCrush (" + dupe.width + "x" + dupe.height + ")";
    };
    dupe.src = image.src;
}, false);
</script>
